# MiniRust Transpiler

`mini-rust` is a [MiniJava](https://github.com/lascar-pacagi/MiniJava) heavily inspired project. The goal was to create a transpiler from a subset of Rust to C. This project was supposed to follow the [Jean D. Teh](https://github.com/vocthor/Jean-D.-Teh) : a transpiler from Whitespace to Rust. Sadly, MiniRust is not mature enough to compile all the code generated by Jean D. Teh.

To know more about what MiniRust can or cannot do, [see Limitations](#limitations).

## Install Dependencies (same as MiniJava)

### Linux (Ubuntu)

```bash
sudo apt-get install ocaml opam
opam init -a -y
eval `opam config env`
opam switch -y 4.07.0
eval `opam config env`
opam install -y ocamlbuild ocamlfind menhir
```

### Mac OS X

```bash
brew install gpatch m4 ocaml opam
opam init -a -y
eval `opam config env`
opam switch -y 4.07.0
eval `opam config env`
opam install -y ocamlbuild ocamlfind menhir
```

## Download, Compile and Run

Once you have the dependencies (see above), run the following commands in your terminal.

```bash
git clone https://github.com/frncslr/Mini-Rust 
make
./mini-rust file.rs
./file
```

The default C compiler is `cc`. if you want to use another compiler, you should give the name of the compiler as follow.

```bash
./mini-rust --c-compiler clang file.rs
```


## Differences with MiniJava

Putting aside language level differences (like oriented object vs imperative programming), I've personally decided to change how some concepts are implemented in MiniRust compared to MiniJava. Those changes include : 
- no more typechecking of what is displayed
- booleans can be displayed (after being casted to integer)

## Limitations

Here is a list of what is implemented : 
- types : i32, bool
- arithmetic and boolean expressions : +, -, *, &&, not, <
- function declaration and function call
- control structures : if, while
- system : println!

However, I was not able to fully implement some functionalities : 
- arrays (Work In Progress)
- ownership principle with mut variables
- references and mutable references

__IMPORTANT__ : As the `mut` keyword and the ownership principle have not been implemented yet, all variables are by default mutable when declared only with `let ...`.

__This can lead to slight differences between the output of MiniRust compared to the official Rust (thus explainig why some tests fail, but in fact all of them pass).__